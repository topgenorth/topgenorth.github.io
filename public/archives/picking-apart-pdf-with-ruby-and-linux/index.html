<!DOCTYPE html>
<html>
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><title>opgenorth.net</title></head>
<body>

<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Picking Apart PDF with Ruby and Linux</h1>
			<div class="post__meta meta">
<div class="meta__item-datetime meta__item">
	<svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0a14 14 0 1 1 0 28 1 1 0 0 1 0-28m0 3a3 3 0 1 0 0 22 3 3 0 0 0 0-22m1 4h-2v8.4l6.8 4.4L22 18l-6-3.8z"/></svg><time class="meta__text" datetime="2011-03-17T00:00:00Z">2011-03-17</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2 1 2h8v11H0V2z"/></svg><span class="meta__text"><a class="meta__link" href="/categories/Programming/" rel="category">Programming</a>
	</span>
</div></div>
		</header>
		<div class="content post__content clearfix">
			<p>I ran into a curious problem for a side problem of mine where I had some information in PDF files, both text and images.&#160; What I want to do is display the information from the PDF's on a mobile (Android) device.&#160; PDF isn't exactly a mobile friendly format, so I got the idea use HTML.&#160; The next trick then becomes how to get the content out of the PDF's I want into HTML.&#160; Tux to the rescue!</p>  <p>As luck would have the, the utilities pdftotext and pdfimage will allow you to extract your text and images from a PDF (respectively).&#160; pdftotext was even nice enough to extract the text from the PDF and put it into an HTML document for me. (To get these on your Ubuntu box:&#160;&#160; sudo apt-get install xpdf-utils).&#160; Once I had these apps installed, I used a bit of Ruby to automate the process - I had 65 PDF's to convert and wasn't crazy about the keystrokes involved for all 65 files.&#160; Net time to do all this was a comfortable couple of hours in front of my TV catching up on the backlog of shows on the PVR.&#160; How is that for multi-tasking?</p>  <p>Here is the Ruby script I wrote.&#160; I welcome suggestions / improvements / enhancements / comments / cash donations / bottles of scotch:</p> 
<pre lang="ruby" line="1">
#!/usr/bin/ruby
Dir.glob("*.txt") do |file| File.delete(file) end
Dir.glob("*.jpg") do |file| File.delete(file) end
Dir.glob("*.pdf") do |file|
	basename = File.basename(file,'.*')
	if (File.directory?(basename))
		Dir.glob("./#{basename}/*.*") do |file2| File.delete(file2) end
	else
	  Dir.mkdir basename unless File.directory?(basename)
	end
	system("pdftotext", "-htmlmeta", file, "./#{basename}/#{basename}.html")
	system("pdfimages", "-j",  file, "./#{basename}/")
	puts "Converted #{file} to text and extracted images to #{basename}."
end

</pre>

		</div>
		<footer class="post__footer">
			
<div class="post__tags tags clearfix">
	<svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M4 0h8s2 0 4 2l15 15s2 2 0 4L21 31s-2 2-4 0L2 16s-2-2-2-4V3s0-3 4-3m3 10a3 3 0 0 0 0-6 3 3 0 0 0 0 6"/></svg>
	<ul class="tags__list">
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/Linux/" rel="tag">Linux</a>
		</li>
	</ul>
</div>
		</footer>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/archives/purging-your-privates-msmq-with-powershell/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Purging your Privates (MSMQ with Powershell)</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/archives/slide-deck-and-code-from-prairie-developers-conference-2011/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Slide deck and code from Prairie Developers Conference 2011</p>
		</a>
	</div>
</nav>





</body>
</html>
