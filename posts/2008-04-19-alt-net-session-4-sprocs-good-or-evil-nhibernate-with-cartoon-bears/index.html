<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>ALT.NET Session #4: Sprocs Good Or Evil / NHibernate with Cartoon Bears - Opgenorth.NET</title><script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title=Opgenorth.NET rel=home><div class="logo__item logo__text"><div class=logo__title>Opgenorth.NET</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/posts/><span class=menu__text>Blog</span></a></li><li class=menu__item><a class=menu__link href=/gallery/><span class=menu__text>Travel Gallery</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>ALT.NET Session #4: Sprocs Good Or Evil / NHibernate with Cartoon Bears</h1></header><div class="content post__content clearfix"><p>Two topics merged into one.  Rod Paddock wants to talk about stored procs, and others want to learn how to explain NHibernate to other people who aren&rsquo;t familiar with it (and minimize the jargon).</p><p>Rod uses a custom code-gen solution based heavily on sprocs - a data driven approach.  Sounds like it works well for him.  Oren concurs that this technique could be very effective in certain circumstances.  It will have problems with complex situations that deal with convoluted/difficult data scenarios.  He&rsquo;s giving an example, but I just can&rsquo;t keep up with him.  The point of Oren&rsquo;s story is that a domain driven approach will would better when you&rsquo;re not dealing with data but with data and behavior.</p><p>Brad Abrams brings up the point of noun centric vs. verb centric  designs.  Noun centric == data driven.  Verb centric == domain driven.</p><p>Oren talks about one of the big advantages of DDD.  We can very easily change the model, as it is all in code.  Tools like R# allow us to make changes quickly, and then NHibernate will allow us to update the database just  as quickly.  Databases are an implementation detail, part of the application, a mere persistence store.  A good domain design will generally lend itself to a  decent database design.</p><p>Apparently it is possible to suffer from an SQL injection attack with NHibernate.  According to Oren, you have to be pretty stupid for this to happen, but it can happen.  I did not know this.</p><p>Topic changes:  what do you do when you come to a client who has 1.5TB of established data and database.  How do you deal with that?  Ideally, you claim ownership of the data, and carry on.  This isn&rsquo;t very realistic.</p><p>Oren starts explaining that NHibernate can allow you to partition the data in existing databases to match your model.  He suggests that it might be better to speak with the DBA to make a new model, as this approach might take a lot of effort.  Might be smarter/better to change the persistence.</p><p>Oren&rsquo;s preference is to generate the HBM&rsquo;s by hand.  He wants the pain to be real.  The logic is that the pain will force you to thing about your model, and helps you focus on what is important to your model.  By generating the code, you end up with, for example, a domain model that has 200 classes/tables and classes with 700 fields.</p><p>Another advantage of using NHibernate:  you get a nice way to set up a unit of work, and can specify boundaries for your application.  For example, you can, via an HttpModule with your unit of work, limit the number of queries (trips to the database).  Oren:  Going to the database is the best place to optimize, not the query itself.  Minimize the trips to the database.  You can enforce this limit right away.  It is not a problem that will hit you out of the blue in production.</p><p>NHibernate is very complex, and the learning curve very steep.  Oren argues it is not overly complex, and this complexity allows you to very advanced things.  For the simple stuff, NHibernate is very easy.  It is very irresponsible to just parachute in, introduce NHibernate, and then disappear.</p><p>Oren quotes:</p><ul><li>&ldquo;I tend to be nice to people that pay me&rdquo;</li><li>&ldquo;Use a set, that is all&rdquo;</li><li>&ldquo;Don&rsquo;t worry about performance until you see you have a hotspot and are using a profiler&rdquo;</li><li>&ldquo;Whoever designed Linq bordered between genius and madman&rdquo;</li></ul><p><a href=http://www.flux88.com/>Ben Scheirman</a> refers us to <a href=http://www.hibernate.org/hib_docs/nhibernate/1.2/reference/en/html/collections.html>Chapter 6</a> in NHibernate.  Important for collections.</p><p>It seems that this session is not so much stored procs, but a Q&amp;A session from the community about what exactly NHibernate can do.  Oren&rsquo;s knowledge and experience</p><p>The CLR is very fast, asserts Oren Eini.  Rod Paddock disagrees.  With WebForms, it isn&rsquo;t the CLR that is slower, it is all the stuff that goes on behind the scenes with the page lifecycle.</p><p>The question is asked:  Are datasets more efficient that NHibernate.  Apparently some people get hung up on these types of things, and claim that tools like ORM&rsquo;s aren&rsquo;t good because they add overhead.  Sounds like premature overhead to me.</p><p>Unrelated trivia:  This is the latest in the year it has snowed in Seattle since 1968.</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M4 0h8s2 0 4 2l15 15s2 2 0 4L21 31s-2 2-4 0L2 16s-2-2-2-4V3s0-3 4-3m3 10a3 3 0 000-6 3 3 0 000 6"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/.net/ rel=tag>.NET</a></li><li class=tags__item><a class="tags__link btn" href=/tags/alt.net/ rel=tag>ALT.NET</a></li></ul></div></footer></article></main></div><aside class=sidebar><div class="widget-search widget"><form class=widget-search__form role=search method=get action=https://google.com/search><input class=widget-search__field type=search placeholder=Search… name=q aria-label=Search…>
<input class=widget-search__submit type=submit value=Search>
<input type=hidden name=sitesearch value=https://topgenorth.github.io/></form></div><div class="widget-recent widget"><h4 class=widget__title>Recent Posts</h4><div class=widget__content><ul class=widget__list><li class=widget__item><a class=widget__link href=/posts/reforming-brass/>Reforming brass for the Mauser 98k</a></li><li class=widget__item><a class=widget__link href=/posts/ballistics-of-norinco-762x51/>Ballistics of Norinco 7.62x51</a></li><li class=widget__item><a class=widget__link href=/posts/ballistics-of-norinco-762x39/>Ballistics of Norinco 7.62x39</a></li><li class=widget__item><a class=widget__link href=/posts/wiring-up-a-nest/>Wiring Up a 2nd Generation Nest</a></li><li class=widget__item><a class=widget__link href=/posts/measure-distance-with-arduino/>Measuring Distance with Arduino</a></li><li class=widget__item><a class=widget__link href=/posts/sublime-text-and-arduino/>Sublime Text 2 and Arduino</a></li><li class=widget__item><a class=widget__link href=/posts/write-gps-to-jpg/>Embed GPS in a JPEG</a></li></ul></div></div><div class="widget-categories widget"><h4 class=widget__title>Categories</h4><div class=widget__content><ul class=widget__list><li class=widget__item><a class=widget__link href=/categories/firearms/>Firearms</a></li><li class=widget__item><a class=widget__link href=/categories/personal/>Personal</a></li><li class=widget__item><a class=widget__link href=/categories/programming/>Programming</a></li><li class=widget__item><a class=widget__link href=/categories/technology/>Technology</a></li></ul></div></div><div class="widget-taglist widget"><h4 class=widget__title>Tags</h4><div class=widget__content><a class="widget-taglist__link widget__link btn" href=/tags/.net/ title=.NET>.NET</a>
<a class="widget-taglist__link widget__link btn" href=/tags/7.62x51/ title=7.62x51>7.62x51</a>
<a class="widget-taglist__link widget__link btn" href=/tags/7.92x57/ title=7.92x57>7.92x57</a>
<a class="widget-taglist__link widget__link btn" href=/tags/alt.net/ title=ALT.NET>ALT.NET</a>
<a class="widget-taglist__link widget__link btn" href=/tags/android/ title=Android>Android</a>
<a class="widget-taglist__link widget__link btn" href=/tags/arduino/ title=Arduino>Arduino</a>
<a class="widget-taglist__link widget__link btn" href=/tags/ballistics/ title=Ballistics>Ballistics</a>
<a class="widget-taglist__link widget__link btn" href=/tags/c%23/ title=C#>C#</a>
<a class="widget-taglist__link widget__link btn" href=/tags/javascript/ title=JavaScript>JavaScript</a>
<a class="widget-taglist__link widget__link btn" href=/tags/linux/ title=Linux>Linux</a>
<a class="widget-taglist__link widget__link btn" href=/tags/mono/ title=Mono>Mono</a>
<a class="widget-taglist__link widget__link btn" href=/tags/rant/ title=Rant>Rant</a>
<a class="widget-taglist__link widget__link btn" href=/tags/reloading/ title=Reloading>Reloading</a>
<a class="widget-taglist__link widget__link btn" href=/tags/samoyed/ title=Samoyed>Samoyed</a>
<a class="widget-taglist__link widget__link btn" href=/tags/tdd/ title=TDD>TDD</a>
<a class="widget-taglist__link widget__link btn" href=/tags/technology/ title=Technology>Technology</a>
<a class="widget-taglist__link widget__link btn" href=/tags/windows/ title=Windows>Windows</a>
<a class="widget-taglist__link widget__link btn" href=/tags/xamarin/ title=Xamarin>Xamarin</a>
<a class="widget-taglist__link widget__link btn" href=/tags/yeg/ title=YEG>YEG</a></div></div></aside></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2026 Opgenorth.NET.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>