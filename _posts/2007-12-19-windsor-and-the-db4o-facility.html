--- 
layout: post
title: Windsor and the db4o Facility
tags: []

status: publish
type: post
published: true
meta: {}

---
<p>Once again, appealling to the niche (non-existant?) market, I give you a quick run down on using <a href="http://www.db4o.com/">db4o</a>, and the <a href="http://www.castleproject.org/container/index.html">Castle Windsor</a> <a href="http://www.castleproject.org/index.php/Facility:db4o">db4o facility</a>.&#160; Yes, I know the link for the db4o facility link doesn't work.&#160; That is what prompted me to do this blog post. This is because, a while ago, the <a href="http://www.db4o.com/">db4o</a> facility was pulled from the Castle Project.&#160; Apparently there was a licencing concern.&#160; It's my understanding that this has since been resolved, and I seen now that there is again the <a href="http://www.db4o.com">db4o</a> facility.</p>  <p>First off, a safety tip:&#160; the <a href="http://www.castleproject.org/castle/download.html">lastest Castle binaries</a> are compiled against <a href="http://developer.db4o.com/files/folders/db4o_61/default.aspx">db4o 6.1</a>.&#160; The current version of <a href="http://developer.db4o.com/files/folders/db4o_64/default.aspx">db4o is 6.4</a>.&#160; The two assemblies are not compatible.&#160; If you need to use <a href="http://developer.db4o.com/files/folders/db4o_64/default.aspx">db4o v6.4</a>, I suspect that you'll have to compile the Castle code on your own.&#160; Me, I just rolled back to the older version of <a href="http://www.db4o.com">db4o</a>.</p>  <p>With that out of the way, let me make the following assumption: </p>  <ol>   <li>You are already using Castle Windsor and have that already set up in your application. </li>    <li>You are using XML files to configure Windsor (i.e. not Binsor).&#160; It probably wouldn't be hard to adapt this to Binsor, but for now, please humour me. </li> </ol>  <p>You'll need to copy two files to your bin directory: </p>  <ul>   <li>Castle.Facilities.Db4oIntegration.dll </li>    <li>Castle.Services.Transaction.dll </li> </ul>  <p>Note that you don't have to reference these files in your project, but they do have to be somewhere that .NET (and Windsor) can find them and load them.</p>  <p>You probably have a config file where you register your components/facilities.&#160; I'll show you the contents of my facilities config file.&#160; It's actually pretty simple:</p>  <pre style="border-bottom: #cecece 1px solid; border-left: #cecece 1px solid; padding-bottom: 5px; background-color: #fbfbfb; min-height: 40px; padding-left: 5px; width: 650px; padding-right: 5px; overflow: auto; border-top: #cecece 1px solid; border-right: #cecece 1px solid; padding-top: 5px"><pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px"><span style="color: #0000ff">&lt;</span><span style="color: #800000">facilities</span><span style="color: #0000ff">&gt;</span>
</pre><pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">  <span style="color: #0000ff">&lt;</span><span style="color: #800000">facility</span> <span style="color: #ff0000">id</span>=<span style="color: #0000ff">&quot;chronydownload&quot;</span>
</pre><pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">            <span style="color: #ff0000">type</span>=<span style="color: #0000ff">&quot;Castle.Facilities.Db4oIntegration.Db4oFacility, Castle.Facilities.Db4oIntegration&quot;</span><span style="color: #0000ff">&gt;</span>
</pre><pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">    <span style="color: #0000ff">&lt;</span><span style="color: #800000">container</span> <span style="color: #ff0000">id</span>=<span style="color: #0000ff">&quot;db4o.container&quot;</span> <span style="color: #ff0000">databaseFile</span>=<span style="color: #0000ff">&quot;data/reloading.db4o&quot;</span> <span style="color: #0000ff">/&gt;</span>
</pre><pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">  <span style="color: #0000ff">&lt;/</span><span style="color: #800000">facility</span><span style="color: #0000ff">&gt;</span>
</pre><pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px"><span style="color: #0000ff">&lt;/</span><span style="color: #800000">facilities</span><span style="color: #0000ff">&gt;</span></pre></pre>

<p>With this little snippet, Windsor will now resolve provide you an IObjectContainer using the database reloading.db4o.</p>

<p>There are some other values you can pass to the container.&#160; The best source of documentation in this matter would be the source code for the facility.</p>
